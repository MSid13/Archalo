<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archalo - Archaeological Discovery Guidelines & Native American Artifact Resources</title>
    <meta name="description" content="Found an artifact? Get instant, location-specific guidance on reporting archaeological discoveries. Understand artifact laws (ARPA, NAGPRA) and get help if you found an artifact. Daily featured artifacts from the Smithsonian.">
    <meta name="keywords" content="I found an artifact, found an artifact what to do, artifact discovery help, location specific artifact guidance, location aware artifact discovery, archaeology, Native American artifacts, archaeological laws, artifact discovery, reporting artifacts, cultural heritage, archaeological resources, what to do if you find an artifact">
    <meta name="author" content="Archalo">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://owlcheologists.web.app/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://owlcheologists.web.app/">
    <meta property="og:title" content="Archalo - Archaeological Discovery Guidelines & Resources">
    <meta property="og:description" content="Found an artifact? Get expert, location-specific guidance on reporting archaeological discoveries, understanding artifact protection laws, and exploring Native American cultural heritage with daily featured Smithsonian artifacts.">
    <meta property="og:image" content="https://owlcheologists.web.app/owlcheologists.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://owlcheologists.web.app/">
    <meta property="twitter:title" content="Archalo - Archaeological Discovery Guidelines & Resources">
    <meta property="twitter:description" content="Found an artifact? Get location-specific guidance on reporting archaeological discoveries, understanding artifact protection laws, and exploring Native American cultural heritage.">
    <meta property="twitter:image" content="https://owlcheologists.web.app/owlcheologists.png">
    
    <link rel="icon" type="image/png" href="owlcheologists.png">
    <script src="https://www.google.com/recaptcha/enterprise.js?render=6LfiAjYsAAAAABjnkEQXCk7t9qBN0Ut8V9R-8tyX"></script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Archalo",
        "url": "https://owlcheologists.web.app/",
        "description": "Archaeological discovery guidelines, artifact laws, and Native American cultural heritage resources",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://owlcheologists.web.app/?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "EducationalOrganization",
        "name": "Archalo",
        "url": "https://owlcheologists.web.app/",
        "description": "Providing education and guidance on archaeological discoveries, artifact protection laws including ARPA and NAGPRA, and Native American cultural heritage",
        "educationalLevel": "General Public",
        "about": [
            {
                "@type": "Thing",
                "name": "Archaeology"
            },
            {
                "@type": "Thing",
                "name": "Native American Heritage"
            },
            {
                "@type": "Thing",
                "name": "Archaeological Resources Protection Act"
            }
        ]
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        
        body {
            background-color: #fff;
            color: #1a1a1a;
            line-height: 1.6;
        }
        
        /* Artifact of the day section */
        .artifact-of-day {
            background-color: #f9f9f9;
            padding: clamp(3rem, 8vw, 5rem) 2rem;
            text-align: center;
        }

        /* Full Height Hero Section */
        .hero {
            min-height: 70vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 4rem 2rem 3rem 2rem;
            
            /* High-resolution background image with overlay */
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.4)), 
                        url('banner.PNG') no-repeat center center;
            background-size: cover;
            background-attachment: scroll;
            position: relative;
        }

        .hero-inner-content {
            width: 100%;
            max-width: 1200px;
            z-index: 2;
        }

        .hero-inner-content h1 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            letter-spacing: -1px;
            line-height: 1.2;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            color: rgba(255,255,255,0.95);
            margin-bottom: 2.5rem;
            font-weight: 400;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }

        /* Location Search Container */
        .location-search-container {
            display: flex;
            gap: 1rem;
            max-width: 700px;
            margin: 0 auto 3rem auto;
            flex-wrap: wrap;
            justify-content: center;
        }

        .location-input-wrapper {
            position: relative;
            flex: 1;
            min-width: 250px;
            max-width: 500px;
        }

        .location-icon-right {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: #2563eb;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            padding: 0.5rem;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
        }

        .location-icon-right:hover {
            background: #1d4ed8;
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.4);
        }

        .location-icon-right:active {
            transform: translateY(-50%) scale(0.95);
        }

        #locationInput {
            width: 100%;
            padding: 1rem 3.5rem 1rem 1rem;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            background: white;
            color: #333;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        #locationInput::placeholder {
            color: #999;
        }

        /* Modern Gradient Button Style */
        .btn-instant {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
            color: #fff;
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            padding: 1rem 2rem;
            font-weight: 600;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
            cursor: pointer;
            white-space: nowrap;
        }

        .btn-instant:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        .btn-instant:active {
            transform: translateY(0);
        }

        /* Current Location Button */
        .btn-current-location {
            display: none;
        }

        .btn-current-location:hover {
            display: none;
        }

        .btn-current-location:active {
            transform: translateY(0);
        }

        /* Privacy Notice */
        .privacy-notice {
            max-width: 700px;
            margin: 0 auto;
            padding: 1.5rem;
            background: rgba(0,0,0,0.5);
            border-radius: 12px;
            color: rgba(255,255,255,0.9);
        }

        .privacy-notice h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .privacy-notice p {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Feature Cards Section */
        .feature-cards-section {
            padding: 3rem 2rem;
            background: rgba(255,255,255,0.05);
            width: 100%;
            display: flex;
            justify-content: center;
        }
        
        @media (max-width: 768px) {
            .feature-cards-section {
                padding: 2rem 0.25rem;
            }
        }

        .feature-cards-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            max-width: 1400px;
            justify-content: center;
        }

        @media (max-width: 1100px) {
            .feature-cards-grid {
                gap: 1.2rem;
            }
        }

        .feature-card-item {
            background: white;
            padding: 1rem 1rem 1.2rem 1rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
            max-width: 180px;
            width: 100%;
        }

        @media (max-width: 768px) {
            .feature-card-item {
                max-width: none;
                width: 100%;
                padding: 2.5rem 2rem;
            }
            
            .feature-icon-img {
                width: 160px;
                height: 160px;
            }
            
            .feature-card-item h3 {
                font-size: 1.5rem;
                margin-bottom: 0.8rem;
            }
            
            .feature-card-item p {
                font-size: 1.1rem;
            }
        }

        @media (min-width: 1000px) {
            .feature-card-item {
                max-width: 185px;
                padding: 1.3rem 1.2rem 1.5rem 1.2rem;
            }
        }

        .feature-card-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .feature-icon-img {
            width: 100px;
            height: 100px;
            margin: 0 auto 0.5rem auto;
            object-fit: contain;
        }

        @media (min-width: 1000px) {
            .feature-icon-img {
                width: 120px;
                height: 120px;
                margin: 0 auto 0.7rem auto;
            }
        }

        .feature-card-item h3 {
            font-size: 1rem;
            margin-bottom: 0.3rem;
            color: #2c3e50;
            line-height: 1.3;
        }

        @media (min-width: 1000px) {
            .feature-card-item h3 {
                font-size: 1.1rem;
                margin-bottom: 0.4rem;
            }
        }

        .feature-card-item p {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.4;
        }

        .feedback-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            color: rgba(255,255,255,0.7);
            font-size: 0.75rem;
            font-weight: 400;
            transition: all 0.3s ease;
            margin-top: 12px;
            padding: 6px 12px;
            border-radius: 4px;
            background: rgba(255,255,255,0.05);
        }

        .feedback-link:hover {
            color: rgba(255,255,255,0.95);
            background: rgba(255,255,255,0.1);
            transform: translateX(3px);
        }

        .feedback-link .arrow {
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }

        .feedback-link:hover .arrow {
            transform: translateX(4px);
        }

        /* Features Carousel */
        .features-carousel {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: clamp(3rem, 6vw, 5rem) clamp(1rem, 3vw, 2rem);
            overflow: hidden;
        }

        .features-carousel h2 {
            text-align: center;
            color: #2c3e50;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .features-carousel p.subtitle {
            text-align: center;
            color: #666;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: 3rem;
            font-family: 'Segoe UI', sans-serif;
            font-style: normal;
        }

        .carousel-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }

        .carousel-track {
            display: flex;
            gap: 2rem;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 1rem 0.5rem 2rem;
            scrollbar-width: thin;
            scrollbar-color: #d4704a #f0f0f0;
        }

        .carousel-track::-webkit-scrollbar {
            height: 8px;
        }

        .carousel-track::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 10px;
        }

        .carousel-track::-webkit-scrollbar-thumb {
            background: #d4704a;
            border-radius: 10px;
        }

        .feature-card {
            flex: 0 0 280px;
            background: white;
            border-radius: 12px;
            padding: 2rem 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            border-color: #d4704a;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .feature-card h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .feature-card p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
        }

        @media (max-width: 768px) {
            .feature-card {
                flex: 0 0 calc(100vw - 4rem);
                max-width: 400px;
                padding: 1.8rem 1.5rem;
            }

            .carousel-track {
                gap: 1.5rem;
                padding: 1rem 1rem 2rem;
            }
        }

        @media (max-width: 480px) {
            .feature-card {
                flex: 0 0 calc(100vw - 3rem);
                padding: 2rem 1.5rem;
            }
        }

        /* Home page guidance results */
        #homeGuidanceResults {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive adjustments for home artifact finder */
        @media (max-width: 768px) {
            .found-artifact-content > div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
            }

            .hero {
                min-height: 60vh;
                padding: 3rem 1rem 2rem 1rem;
            }

            .location-search-container {
                flex-direction: column;
                gap: 0.8rem;
            }

            .location-input-wrapper {
                min-width: 100%;
            }

            .btn-instant {
                width: 100%;
                padding: 0.9rem 1.5rem;
            }

            .btn-current-location {
                width: 100%;
                padding: 0.7rem 1.2rem;
            }

            .feature-cards-grid {
                flex-direction: column;
                align-items: stretch;
                gap: 1.5rem;
                padding: 0;
            }

            .feature-cards-section {
                padding: 2rem 0.25rem;
            }

            .privacy-notice {
                padding: 1.2rem;
            }

            .privacy-notice h3 {
                font-size: 1rem;
            }

            .privacy-notice p {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .hero-inner-content h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
                margin-bottom: 2rem;
            }

            .feature-card-item {
                padding: 1.5rem;
            }

            .feature-card-item h3 {
                font-size: 1.1rem;
            }
        }

        .contact-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: clamp(0.9rem, 2vw, 1rem);
            color: #2c3e50;
        }

        .read-more-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, #d4704a, #c0603c);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 112, 74, 0.2);
        }

        .read-more-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 112, 74, 0.35);
        }

        
        .artifact-of-day h2 {
            color: #2c3e50;
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 2rem;
            font-weight: 700;
            letter-spacing: -1px;
        }
        
        .artifact-placeholder {
            max-width: 1000px;
            margin: 0 auto;
            padding: clamp(1.5rem, 4vw, 2.5rem);
            background: transparent;
        }
        
        .artifact-placeholder p {
            color: #7f8c8d;
            font-style: italic;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
        }
        
        .artifact-content {
            display: grid;
            grid-template-columns: minmax(250px, 1fr) 2fr;
            gap: clamp(1.5rem, 4vw, 3rem);
            align-items: center;
            text-align: left;
        }
        
        .artifact-image {
            width: 100%;
            max-width: 350px;
            height: clamp(200px, 25vw, 250px);
            object-fit: cover;
            margin: 0 auto;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .artifact-image:hover {
            transform: scale(1.02);
        }
        
        .artifact-info h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: clamp(1.3rem, 3vw, 1.8rem);
            font-weight: 600;
            line-height: 1.3;
        }
        
        .artifact-info p {
            color: #555;
            margin-bottom: 0.8rem;
            font-size: clamp(0.9rem, 2vw, 1rem);
            line-height: 1.6;
        }
        
        .artifact-info p strong {
            color: #2c3e50;
            font-weight: 600;
        }
        
        .loading {
            color: #7f8c8d;
            font-style: italic;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
        }
        
        /* Features section */
        .content {
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(3rem, 6vw, 5rem) 2rem;
        }

        /* Hero Content Section */
        .hero-content {
            text-align: center;
            margin-bottom: clamp(4rem, 8vw, 6rem);
        }

        .hero-content h2 {
            color: #2c3e50;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            margin-bottom: 1.5rem;
            font-weight: 700;
            letter-spacing: -1px;
        }

        .hero-description {
            color: #555;
            font-size: clamp(1.1rem, 2.5vw, 1.3rem);
            line-height: 1.7;
            max-width: 800px;
            margin: 0 auto 2.5rem;
        }

        .quick-actions {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            min-width: 200px;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .cta-button.primary {
            background: linear-gradient(135deg, #d4704a, #c0603c);
            color: white;
        }

        .cta-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 112, 74, 0.3);
        }

        .cta-button.secondary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .cta-button.secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: clamp(1.5rem, 4vw, 2.5rem);
            margin-bottom: clamp(4rem, 8vw, 6rem);
        }
        
        .feature {
            text-align: center;
            padding: clamp(2rem, 4vw, 3rem);
            background: transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #d4704a, #3498db);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feature:hover {
            transform: translateY(-8px);
        }

        .feature:hover::before {
            opacity: 1;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            display: block;
        }
        
        .feature h3 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
            font-weight: 600;
        }
        
        .feature p {
            color: #666;
            font-size: clamp(0.95rem, 2vw, 1.1rem);
            line-height: 1.7;
        }

        /* About Section */
        .about-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: clamp(2rem, 4vw, 3rem) clamp(1rem, 3vw, 2rem);
            margin-bottom: 0;
            text-align: center;
        }

        .about-section h2 {
            color: #2c3e50;
            font-size: clamp(2rem, 4vw, 2.8rem);
            margin-bottom: 2rem;
            text-align: center;
            font-weight: 700;
        }

        .about-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .about-text p {
            color: #555;
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .disclaimer h4 {
            color: #856404;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .disclaimer p {
            color: #856404;
            font-size: 0.95rem;
            margin: 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: 12px;
        }

        .stat-number {
            color: #d4704a;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        /* Responsive breakpoints */
        @media (max-width: 768px) {
            .artifact-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 2rem;
            }
            
            .artifact-image {
                max-width: 280px;
                height: 200px;
            }

            .about-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .features {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                flex-direction: column;
                align-items: center;
            }

            .cta-button {
                width: 100%;
                max-width: 300px;
            }

            .contact-info {
                flex-direction: column;
                gap: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .artifact-of-day {
                padding: 2rem 1rem;
            }
            
            .content {
                padding: 2rem 1rem;
            }
            
            .features {
                gap: 1.5rem;
            }
            
            .feature {
                padding: 1.5rem;
            }
        }
        
        @media (min-width: 1200px) {
            .artifact-content {
                gap: 4rem;
            }
            
            .artifact-image {
                max-width: 400px;
                height: 280px;
            }
        }
        
        /* Footer */
        footer {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
            padding: 2rem 1rem;
            margin-top: 3rem;
            text-align: center;
        }
        
        .footer-disclaimer {
            max-width: 900px;
            margin: 0 auto 1rem;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #bdc3c7;
        }
        
        /* Focus styles for accessibility */
        .nav-links a:focus,
        .mobile-menu-toggle:focus {
            outline: 2px solid #3498db;
            outline-offset: 2px;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        #announcement-content p {
            margin: 0;
            padding: 0;
        }

        #announcement-content a {
            color: #2980b9;
            text-decoration: underline;
            font-weight: 500;
        }

        #announcement-content a:hover {
            color: #3498db;
        }

        #announcement-content strong {
            font-weight: 600;
            color: #2c3e50;
        }

        #announcement-content em {
            font-style: italic;
        }

        #announcement-content code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        /* Contact Card Styles (matching artifactHelp.html) */
        .contact-card {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        
        .contact-card h4 {
            color: #856404;
            margin-bottom: 0.5rem;
        }
        
        .contact-info {
            color: #856404;
        }
        
        .emergency-note {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #721c24;
        }

        /* Section Divider */
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #d4704a, transparent);
            margin: 0;
            border: none;
        }

        /* Mobile Responsive Styles for Hero */
        @media (max-width: 480px) {
            .hero-inner-content h1 { 
                letter-spacing: -1px; 
            }
            .btn-instant { 
                padding: 16px 36px; 
                font-size: 0.9rem;
                letter-spacing: 1.5px; 
            }
            .feedback-link {
                font-size: 0.7rem;
            }
        }

        /* Visual Process Timeline Styles */
        .process-timeline-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: clamp(3rem, 8vw, 5rem) clamp(1rem, 3vw, 2rem);
            overflow: hidden;
        }

        .process-timeline-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .process-timeline-container h2 {
            text-align: center;
            color: #2c3e50;
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -1px;
        }

        .timeline-subtitle {
            text-align: center;
            color: #666;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: 3rem;
            font-weight: 400;
        }

        .timeline-wrapper {
            position: relative;
            padding: 2rem 0;
        }

        /* Progress Bar */
        .timeline-progress-bar {
            position: absolute;
            top: 80px;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(212, 112, 74, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .timeline-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #d4704a 0%, #c0603c 100%);
            width: 0;
            border-radius: 2px;
            transition: width 2s ease-in-out;
        }

        /* Timeline Steps Container */
        .timeline-steps {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            position: relative;
            z-index: 1;
        }

        /* Individual Step */
        .timeline-step {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .timeline-step:nth-child(1) { animation-delay: 0.2s; }
        .timeline-step:nth-child(2) { animation-delay: 0.4s; }
        .timeline-step:nth-child(3) { animation-delay: 0.6s; }
        .timeline-step:nth-child(4) { animation-delay: 0.8s; }
        .timeline-step:nth-child(5) { animation-delay: 1s; }

        /* Step Icon */
        .step-icon {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            position: relative;
            transition: all 0.3s ease;
            border: 3px solid #d4704a;
        }

        .timeline-step:hover .step-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(212, 112, 74, 0.3);
        }

        .icon-emoji {
            font-size: 2.5rem;
            animation: bounce 2s infinite;
        }

        .timeline-step:hover .icon-emoji {
            animation: bounce 0.5s infinite;
        }

        /* Step Content */
        .step-content h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .step-content p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
            padding: 0 0.5rem;
        }

        /* Step Number Badge */
        .step-number {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #d4704a, #c0603c);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            box-shadow: 0 2px 8px rgba(212, 112, 74, 0.4);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        /* Mobile Responsive Timeline */
        @media (max-width: 1024px) {
            .timeline-steps {
                gap: 0.5rem;
            }
            
            .step-icon {
                width: 80px;
                height: 80px;
            }
            
            .icon-emoji {
                font-size: 2rem;
            }
            
            .step-content h3 {
                font-size: 1.1rem;
            }
            
            .step-content p {
                font-size: 0.85rem;
            }
        }

        /* Timeline CTA Box */
        .timeline-cta-box {
            margin-top: 4rem;
            background: linear-gradient(135deg, #d4704a 0%, #c0603c 100%);
            border-radius: 16px;
            padding: 2.5rem 2rem;
            box-shadow: 0 8px 30px rgba(212, 112, 74, 0.3);
            display: flex;
            gap: 2rem;
            align-items: center;
            animation: fadeInUp 0.6s ease forwards;
            animation-delay: 1.2s;
            opacity: 0;
        }

        .cta-icon {
            font-size: 4rem;
            flex-shrink: 0;
            animation: pulse 2s infinite;
        }

        .cta-content {
            flex: 1;
            color: white;
        }

        .cta-content h3 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .cta-content p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
            padding: 0;
        }

        .cta-content p strong {
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.15);
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: white;
            color: #d4704a;
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
            background: #fff;
        }

        @media (max-width: 768px) {
            .timeline-cta-box {
                flex-direction: column;
                text-align: center;
                padding: 2rem 1.5rem;
                gap: 1.5rem;
            }

            .cta-icon {
                font-size: 3rem;
            }

            .cta-content h3 {
                font-size: 1.5rem;
            }

            .cta-content p {
                font-size: 1rem;
            }

            .cta-button {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .timeline-steps {
                flex-direction: column;
                gap: 3rem;
            }
            
            .timeline-progress-bar {
                top: 50px;
                left: 50%;
                transform: translateX(-50%);
                width: 4px;
                height: calc(100% - 100px);
            }
            
            .timeline-progress-fill {
                width: 100%;
                height: 0;
                transition: height 2s ease-in-out;
            }
            
            .timeline-step {
                flex-direction: row;
                text-align: left;
                gap: 1.5rem;
            }
            
            .step-icon {
                flex-shrink: 0;
                width: 100px;
                height: 100px;
                margin-bottom: 0;
            }
            
            .icon-emoji {
                font-size: 2.5rem;
            }
            
            .step-content {
                flex: 1;
            }
            
            .step-content h3 {
                font-size: 1.4rem;
                text-align: left;
            }
            
            .step-content p {
                font-size: 1rem;
                text-align: left;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation is loaded by shared_nav.js -->
    <script src="js/shared_nav.js"></script>
    
    <div id="announcement-banner" style="background: linear-gradient(135deg, #e8f4f8, #d6e9f1); padding: 0.8rem 1.5rem; margin: 0; border-bottom: 2px solid rgba(52, 152, 219, 0.15);">
        <div id="announcement-content" style="color: #2c3e50; font-size: 0.85rem; text-align: center; margin: 0; font-weight: 400; line-height: 1.4;">
            üì¢ Loading announcement...
        </div>
    </div>

    <!-- I Found an Artifact Info Section -->
    <section class="hero">
        <div class="hero-inner-content">
            <h1>Found an artifact?</h1>
            <p class="subtitle">Learn what steps to take if you've uncovered a potential artifact.</p>
            
            <div class="location-search-container">
                <div class="location-input-wrapper">
                    <input type="text" id="locationInput" placeholder="Enter latitude, longitude (e.g., 47.6062, -122.3321)">
                    <span class="location-icon-right" id="useCurrentLocationIcon" title="Use my current location">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                    </span>
                </div>
                <button class="btn-instant" id="getGuidanceBtn">
                    üìç Get guidance
                </button>
            </div>

            <div class="feature-cards-section">
                <div class="feature-cards-grid">
                    <a href="artifactHelp.html" class="feature-card-item">
                        <img src="icons/wa_state_icon-bg.png" alt="Location guidance" class="feature-icon-img">
                        <h3>Receive location-based guidance</h3>
                    </a>

                    <a href="laws.html" class="feature-card-item">
                        <img src="icons/hammer_icon-bg.png" alt="Archaeology laws" class="feature-icon-img">
                        <h3>Understand archaeology laws</h3>
                    </a>

                    <a href="edu-resources.html" class="feature-card-item">
                        <img src="icons/map-paper_icon-bg.png" alt="Historical timeline" class="feature-icon-img">
                        <h3>Historical Timeline</h3>
                    </a>

                    <a href="#artifact-of-day" class="feature-card-item">
                        <img src="icons/pot_icon-bg.png" alt="Artifact highlights" class="feature-icon-img">
                        <h3>Artifact highlights</h3>
                    </a>
                </div>
            </div>

            <div class="privacy-notice">
                <h3>Cultural heritage is a shared resource ‚Äî help protect it!</h3>
                
                <p>Your exact coordinates are not shared publicly or saved</p>
                <p style="margin-top: 1rem;">
                    <a href="data.html" style="color: rgba(255,255,255,0.9); font-weight: 500; transition: color 0.3s ease;">
                        Learn about our commitment to accuracy ‚Üí
                    </a>
                </p>
            </div>
        </div>
    </section>

    <hr class="section-divider">

    <section class="artifact-of-day" id="artifact-of-day">
        <h2>Artifact of the Day</h2>
        <div class="artifact-placeholder" id="artifact-container">
            <p class="loading">Loading today's artifact...</p>
        </div>
    </section>

    <hr class="section-divider">

    <!-- Location-Aware CTA Section -->
    <section class="process-timeline-section">
        <div class="process-timeline-container">
            <div class="timeline-wrapper">
                <!-- Location-Aware CTA Box -->
                <div class="timeline-cta-box">
                    <div class="cta-icon">üéØ</div>
                    <div class="cta-content">
                        <h3>Artifact finds made easy. </h3>
                        <p>Enter your coordinates at <strong>archalo.org/artifact</strong> and we'll provide personalized guidance including who to contact, relevant laws, property history, and interactive maps ‚Äî all specific to where you found the artifact.</p>
                        <a href="artifactHelp.html" class="cta-button">
                            Get Location-Specific Guidance ‚Üí
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>


    
    <section class="content">
        <!-- Hidden elements for JavaScript functionality -->
        <div style="display: none;">
            <input type="number" id="homeLatitude" step="any">
            <input type="number" id="homeLongitude" step="any">
            <div id="homeGuidanceResults">
                <div id="homeGuidanceContent"></div>
            </div>
            <div id="homeDefaultSteps"></div>
        </div>

        <!-- About Section -->
        <div class="about-section">
            <div class="about-content">
            <div class="about-text">
                <p style="font-size: 1.1rem; color: #2c3e50; font-weight: 500; margin-bottom: 1.5rem; text-align: center;">
                Developed by the <strong style="color: #d4704a;">FLL Owlcheologists Team #41991</strong> to simplify archaeological discovery reporting.
                </p>
            </div>
            
            <div class="stats-grid" style="margin: 2rem auto; max-width: 600px;">
                <div class="stat-item" style="background: linear-gradient(135deg, #ffffff, #f8f9fa); border: 1px solid #e9ecef;">
                <div class="stat-number">1</div>
                <div class="stat-label">State Covered</div>
                </div>
                <div class="stat-item" style="background: linear-gradient(135deg, #ffffff, #f8f9fa); border: 1px solid #e9ecef;">
                <div class="stat-number">100%</div>
                <div class="stat-label">Free to Use</div>
                </div>
            </div>
            </div>
        </div></div></a></p>
    </section>

    <footer>
        <div class="footer-disclaimer">
                        <p style="margin: 1rem 0; font-size: 0.95rem;">
                <strong>Data Sources:</strong> To view the data sources and attributions used on this page, please visit our 
                <a href="credits.html" style="color: #3498db; text-decoration: none; font-weight: 600; border-bottom: 2px solid transparent; transition: border-color 0.3s ease;" 
                   onmouseover="this.style.borderColor='#3498db'" 
                   onmouseout="this.style.borderColor='transparent'">
                    Credits & Attributions
                </a> page.
            </p>
            <p><strong>Disclaimer:</strong> We strive to provide the most accurate and up-to-date data available; however, we cannot guarantee its completeness, accuracy, or fitness for any particular purpose. This guidance is advisory only and should never be relied upon as a substitute for official legal, regulatory, or professional advice. We assume no responsibility or liability for any losses, damages, or consequences resulting directly or indirectly from the use of this information. Users assume all risk and must always verify all information with the relevant governmental or legal authorities.</p>
            <p><br>Report data inaccuracies and/or website bugs <a href="https://forms.gle/NN3anqoQDDi9g5vD7" style="color: #3498db; text-decoration: underline; font-weight: 600; transition: all 0.3s ease;" onmouseover="this.style.color='#5dade2'; this.style.textDecoration='none'" onmouseout="this.style.color='#3498db'; this.style.textDecoration='underline'">here</a>. | 
                <button id="loginButton" onclick="handleLogin()" style="padding: 0.25rem 0.5rem; background: #667eea; color: white; border: none; border-radius: 3px; font-size: 0.75rem; cursor: pointer; transition: opacity 0.3s ease;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">Login</button>
                <span id="loginStatus" style="display: none; color: #27ae60; font-size: 0.75rem;">‚úì Logged In</span>
            </p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; padding: 2rem; border-radius: 10px; max-width: 400px; width: 90%;">
            <h3 style="margin-top: 0;">Login</h3>
            <input type="email" id="loginEmail" placeholder="Email" style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">
            <input type="password" id="loginPassword" placeholder="Password" style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">
            <div style="display: flex; gap: 1rem;">
                <button onclick="submitLogin()" style="flex: 1; padding: 0.75rem; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">Login</button>
                <button onclick="closeLoginModal()" style="flex: 1; padding: 0.75rem; background: #e0e0e0; color: #333; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { initializeAppCheck, ReCaptchaEnterpriseProvider } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app-check.js";

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCCYpXOczp5nRRP1S2Gdb1ADjIAHeJQVq0",
            authDomain: "owlcheologists.firebaseapp.com",
            projectId: "owlcheologists",
            storageBucket: "owlcheologists.firebasestorage.app",
            messagingSenderId: "323297596743",
            appId: "1:323297596743:web:c9455e40779b7c09522862",
            measurementId: "G-2CFYWTQCQ4"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Initialize App Check with reCAPTCHA Enterprise
        const appCheck = initializeAppCheck(app, {
            provider: new ReCaptchaEnterpriseProvider('6LfiAjYsAAAAABjnkEQXCk7t9qBN0Ut8V9R-8tyX'),
            isTokenAutoRefreshEnabled: true
        });

        // Track authentication state
        let userAuthenticated = false;

        // Monitor auth state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("User authenticated:", user.uid);
                userAuthenticated = true;
                updateLoginUI(true);
            } else {
                console.log("User not authenticated");
                userAuthenticated = false;
                updateLoginUI(false);
            }
        });

        // Handle login button click
        window.handleLogin = function() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'flex';
        };

        // Close login modal
        window.closeLoginModal = function() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'none';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        };

        // Submit login
        window.submitLogin = async function() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
                console.log("Successfully logged in");
                closeLoginModal();
            } catch (error) {
                console.error("Error logging in:", error);
                alert('Login failed: ' + error.message);
            }
        };

        // Update login UI
        function updateLoginUI(isLoggedIn) {
            const button = document.getElementById('loginButton');
            const status = document.getElementById('loginStatus');
            
            if (button && status) {
                if (isLoggedIn) {
                    button.style.display = 'none';
                    status.style.display = 'inline';
                } else {
                    button.style.display = 'inline-block';
                    button.disabled = false;
                    button.textContent = 'Login';
                    status.style.display = 'none';
                }
            }
        }

        // Signup function
        window.signupUser = async function() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters');
                return;
            }
            
            try {
                await createUserWithEmailAndPassword(auth, email, password);
                document.getElementById('loginModal').style.display = 'none';
                alert('Account created successfully!');
            } catch (error) {
                console.error('Signup error:', error);
                alert('Signup failed: ' + error.message);
            }
        };

        // Logout function
        window.logoutUser = async function() {
            try {
                await signOut(auth);
                alert('Logged out successfully');
            } catch (error) {
                console.error('Logout error:', error);
                alert('Logout failed: ' + error.message);
            }
        };

        // Show login modal
        window.showLoginModal = function() {
            document.getElementById('loginModal').style.display = 'flex';
        };

        // Close login modal
        window.closeLoginModal = function() {
            document.getElementById('loginModal').style.display = 'none';
        };

        // ============== ANNOUNCEMENT LOADING ==============
        // Wait for marked.js to be available
        function waitForMarked() {
            return new Promise((resolve) => {
                if (typeof marked !== 'undefined') {
                    resolve();
                } else {
                    const checkInterval = setInterval(() => {
                        if (typeof marked !== 'undefined') {
                            clearInterval(checkInterval);
                            resolve();
                        }
                    }, 50);
                }
            });
        }

        async function loadAnnouncement() {
            // Wait for marked.js to load
            await waitForMarked();
            
            try {
                const announcementRef = doc(db, "main", "announcements");
                const announcementSnap = await getDoc(announcementRef);
                
                if (announcementSnap.exists()) {
                    const data = announcementSnap.data();
                    const htmlContent = data.announcement || data.content || data.message;
                    
                    if (htmlContent && htmlContent.trim() !== '') {
                        // Render HTML directly (no markdown parsing)
                        const announcementDiv = document.getElementById('announcement-content');
                        const announcementBanner = document.getElementById('announcement-banner');
                        if (announcementDiv) {
                            announcementDiv.innerHTML = htmlContent;
                        }
                        if (announcementBanner) {
                            announcementBanner.style.display = 'block';
                        }
                    } else {
                        // Content is empty, hide the banner
                        const announcementBanner = document.getElementById('announcement-banner');
                        if (announcementBanner) {
                            announcementBanner.style.display = 'none';
                        }
                    }
                } else {
                    // Document doesn't exist, hide banner
                    const announcementBanner = document.getElementById('announcement-banner');
                    if (announcementBanner) {
                        announcementBanner.style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Error loading announcement:', error);
                // Hide banner on error
                const announcementBanner = document.getElementById('announcement-banner');
                if (announcementBanner) {
                    announcementBanner.style.display = 'none';
                }
            }
        }

        // Load announcement on page load
        loadAnnouncement();

        // ============== ARTIFACT OF THE DAY ==============

        const SMITHSONIAN_API_KEY = "KKiTrGw8uKnEZTiBmCV4gBbkT3Y2KYRGjLL6gKmR";

        // Get today's date string (YYYY-MM-DD)
        function getTodayString() {
            return new Date().toISOString().split('T')[0];
        }

        // Generate deterministic random number based on date
        function getDeterministicRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        // Get date-based seed for consistent daily selection
        function getDateSeed() {
            const today = getTodayString();
            return today.split('-').reduce((acc, part) => acc + parseInt(part), 0);
        }

        // Fetch random artifact from Smithsonian API
        async function fetchRandomArtifact() {
            try {
                // Search for Native American physical artifacts (exclude books, documents, etc.)
                const searchTopic = 'Native American AND (object OR artifact OR pottery OR basket OR tool OR weapon OR jewelry OR textile OR clothing OR ceremonial) NOT (book OR photograph OR print OR document OR manuscript OR paper OR page)';
                console.log("Searching for artifacts with topic:", searchTopic);
                
                // First, get total number of records for this topic
                const searchUrl = `https://api.si.edu/openaccess/api/v1.0/search?api_key=${SMITHSONIAN_API_KEY}&q=${encodeURIComponent(searchTopic)}&rows=0&online_media_type=Images`;
                const searchResponse = await fetch(searchUrl);
                const searchData = await searchResponse.json();
                
                if (searchData.response && searchData.response.rowCount > 0) {
                    console.log(`Found ${searchData.response.rowCount} artifacts for topic: ${searchTopic}`);
                    
                    // Get a truly random offset each time we fetch
                    // This ensures a different artifact if the database is cleared
                    const totalRecords = Math.min(searchData.response.rowCount, 10000);
                    const randomOffset = Math.floor(Math.random() * totalRecords);
                    
                    console.log(`Fetching artifact at offset ${randomOffset} of ${totalRecords}`);
                    
                    // Fetch artifact with image
                    const artifactUrl = `https://api.si.edu/openaccess/api/v1.0/search?api_key=${SMITHSONIAN_API_KEY}&q=${encodeURIComponent(searchTopic)}&rows=1&start=${randomOffset}&online_media_type=Images`;
                    const artifactResponse = await fetch(artifactUrl);
                    const artifactData = await artifactResponse.json();
                    
                    if (artifactData.response && artifactData.response.rows && artifactData.response.rows.length > 0) {
                        const artifact = artifactData.response.rows[0];
                        console.log("Raw artifact data:", artifact);
                        
                        // Extract data following the API structure
                        const content = artifact.content || {};
                        const freetext = content.freetext || {};
                        const indexedStructured = content.indexedStructured || {};
                        const descriptiveNonRepeating = content.descriptiveNonRepeating || {};
                        const onlineMedia = descriptiveNonRepeating.online_media || {};
                        
                        // Get description from notes or summary
                        let description = "No description available";
                        if (freetext.notes && freetext.notes.length > 0) {
                            // Find summary or first available note
                            const summaryNote = freetext.notes.find(note => note.label === "Summary");
                            const firstNote = freetext.notes[0];
                            description = "Pending approval. Please check back later.";
                        } else if (freetext.physicalDescription && freetext.physicalDescription.length > 0) {
                            description = freetext.physicalDescription[0].content;
                        }
                        
                        // Get image - check multiple possible locations
                        let imageUrl = "";
                        if (onlineMedia.media && onlineMedia.media.length > 0) {
                            // Try to get the highest quality image available
                            const mediaItem = onlineMedia.media[0];
                            imageUrl = mediaItem.content || mediaItem.idsId || mediaItem.thumbnail || "";
                            
                            // If we have an idsId, construct the full image URL
                            if (mediaItem.idsId && !imageUrl.startsWith('http')) {
                                imageUrl = `https://ids.si.edu/ids/deliveryService?id=${mediaItem.idsId}&max=800`;
                            }
                        }
                        
                        // Fallback: check for resources array
                        if (!imageUrl && onlineMedia.mediaCount > 0 && descriptiveNonRepeating.online_visual_material) {
                            const visualMaterial = descriptiveNonRepeating.online_visual_material;
                            if (visualMaterial.length > 0 && visualMaterial[0].idsId) {
                                imageUrl = `https://ids.si.edu/ids/deliveryService?id=${visualMaterial[0].idsId}&max=800`;
                            }
                        }
                        
                        console.log("Extracted image URL:", imageUrl);
                        
                        // Get culture information
                        let culture = "Unknown";
                        if (indexedStructured.culture && indexedStructured.culture.length > 0) {
                            culture = indexedStructured.culture.join(", ");
                        } else if (freetext.name && freetext.name.length > 0) {
                            const cultureName = freetext.name.find(n => n.label === "Culture/People" || n.label === "Culture");
                            if (cultureName) culture = cultureName.content;
                        }
                        
                        // Get date
                        let date = "Date unknown";
                        if (indexedStructured.date && indexedStructured.date.length > 0) {
                            date = indexedStructured.date.join(", ");
                        } else if (freetext.date && freetext.date.length > 0) {
                            date = freetext.date[0].content;
                        }
                        
                        // Get place/location
                        let place = "";
                        if (indexedStructured.place && indexedStructured.place.length > 0) {
                            place = indexedStructured.place.slice(0, 2).join(", ");
                        } else if (freetext.place && freetext.place.length > 0) {
                            place = freetext.place[0].content;
                        }
                        
                        const artifactObj = {
                            id: artifact.id,
                            title: artifact.title || descriptiveNonRepeating.title?.content || "Unknown Artifact",
                            description: description,
                            date: date,
                            culture: culture,
                            place: place,
                            unitCode: artifact.unitCode || "",
                            recordLink: descriptiveNonRepeating.record_link || "",
                            url: artifact.url || ""
                        };
                        
                        console.log("Processed artifact:", artifactObj);
                        return artifactObj;
                    }
                }
                throw new Error("No artifacts found");
            } catch (error) {
                console.error("Error fetching artifact:", error);
                return null;
            }
        }

        // Get or set today's artifact
        async function getTodaysArtifact() {
            const today = getTodayString();
            const docRef = doc(db, "artifactOfDay", today);
            
            try {
                console.log("Checking Firestore for artifact on date:", today);
                console.log("Project ID:", firebaseConfig.projectId);
                console.log("Document path:", `artifactOfDay/${today}`);
                
                const docSnap = await getDoc(docRef);
                console.log("Firestore read successful");
                
                if (docSnap.exists()) {
                    console.log("Found existing artifact in Firestore");
                    return docSnap.data().artifact;
                } else {
                    console.log("No document exists for today, fetching new artifact from API");
                    
                    // Fetch new artifact
                    const artifact = await fetchRandomArtifact();
                    
                    if (artifact) {
                        console.log("Fetched artifact:", artifact.title);
                        
                        // Check if user is authenticated before writing
                        if (!userAuthenticated) {
                            console.log("User not authenticated, cannot save artifact");
                            return artifact; // Return the artifact but don't save it
                        }
                        
                        // Save to Firestore
                        console.log("Saving new artifact to Firestore...");
                        const docData = { 
                            artifact: artifact, 
                            date: today,
                            timestamp: new Date().toISOString()
                        };
                        
                        await setDoc(docRef, docData);
                        console.log("Successfully saved to Firestore!");
                        
                        // Verify the save
                        const verifyDoc = await getDoc(docRef);
                        if (verifyDoc.exists()) {
                            console.log("Verification: Document exists in Firestore");
                            return verifyDoc.data().artifact;
                        } else {
                            console.warn("Verification: Document NOT found in Firestore after save");
                        }
                        
                        return artifact;
                    } else {
                        console.error("Failed to fetch artifact from API");
                        return null;
                    }
                }
            } catch (error) {
                console.error("Firestore operation failed:", error);
                console.error("Error details:", {
                    code: error.code,
                    message: error.message
                });
                
                // Check if it's a permissions error
                if (error.code === 'permission-denied') {
                    console.error("PERMISSION DENIED: Check Firestore security rules");
                    console.log("Suggested Firestore rules for authenticated users:");
                    console.log(`
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
                    `);
                }
                
                return {
                    title: "Database Error",
                    description: "Unable to connect to database. Please check Firestore configuration and security rules.",
                    image: "",
                    date: "Unknown",
                    culture: "Unknown"
                };
            }
        }

        // Display artifact in the UI
        function displayArtifact(artifact) {
            const container = document.getElementById('artifact-container');
            
            if (!artifact) {
                container.innerHTML = '<p class="loading">Unable to load artifact. Please try again later.</p>';
                return;
            }

            // Build the HTML for artifact display
            let artifactHTML = '<div class="artifact-content"><div>';
            
            // Banner section - show image if exists, otherwise gradient banner
            if (artifact.image && artifact.image.trim() !== '') {
                artifactHTML += `<div class="artifact-image" style="background-image: url('${artifact.image}'); background-size: cover; background-position: center; height: 300px; border-radius: 15px 15px 0 0;"></div>`;
            } else {
                artifactHTML += '<div class="artifact-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; font-weight: 700; text-align: center; padding: 2rem; letter-spacing: 2px;">ARTIFACT OF THE DAY</div>';
            }
            
            artifactHTML += '</div><div class="artifact-info">';
            
            // Title (no edit buttons)
            artifactHTML += `<h3>${artifact.title}</h3>`;
            
            // Culture
            if (artifact.culture && artifact.culture !== "Unknown") {
                artifactHTML += `<p><strong>Culture:</strong> ${artifact.culture}</p>`;
            }
            
            // Date
            if (artifact.date && artifact.date !== "Date unknown") {
                artifactHTML += `<p><strong>Date:</strong> ${artifact.date}</p>`;
            }
            
            // Place
            if (artifact.place) {
                artifactHTML += `<p><strong>Location:</strong> ${artifact.place}</p>`;
            }
            
            // Unit/Museum
            if (artifact.unitCode) {
                artifactHTML += `<p><strong>Collection:</strong> ${artifact.unitCode}</p>`;
            }
            
            // Description (no edit buttons)
            if (artifact.description && artifact.description !== "No description available") {
                const maxLength = 300;
                const truncatedDesc = artifact.description.length > maxLength 
                    ? artifact.description.substring(0, maxLength) + '...' 
                    : artifact.description;
                
                artifactHTML += `<p><strong>Description:</strong> ${truncatedDesc}</p>`;
            }
            
            // Link to full record - use record_link or construct from URL
            // The Smithsonian URL structure has changed, so we'll use a search-based approach
            let recordUrl;
            if (artifact.url && artifact.url.includes('http')) {
                // Use the artifact URL if it's a full URL
                recordUrl = artifact.url;
            } else if (artifact.recordLink && artifact.recordLink.includes('http')) {
                // Only use recordLink if it's already a full URL
                recordUrl = artifact.recordLink;
            } else if (artifact.title) {
                // Search for the artifact by title on Smithsonian collections
                // This is more reliable than trying to construct object URLs
                recordUrl = `https://collections.si.edu/search/?q=${encodeURIComponent(artifact.title)}`;
            } else if (artifact.id) {
                // Last resort: search by ID
                recordUrl = `https://collections.si.edu/search/?q=${encodeURIComponent(artifact.id)}`;
            }
            
            if (recordUrl) {
                artifactHTML += `<p style="margin-top: 1.5rem;">
                    <a href="${recordUrl}" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       style="display: inline-block; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3498db, #2980b9); color: white; text-decoration: none; font-weight: 600; border-radius: 8px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);"
                       onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(52, 152, 219, 0.4)';"
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(52, 152, 219, 0.3)';">
                       View Full Record on Smithsonian ‚Üí
                    </a>
                </p>`;
            }
            
            artifactHTML += '</div></div>';
            container.innerHTML = artifactHTML;
        }

        // Initialize artifact of the day
        async function initArtifactOfDay() {
            try {
                console.log("Starting artifact initialization...");
                const artifact = await getTodaysArtifact();
                console.log("Artifact received:", artifact);
                displayArtifact(artifact);
            } catch (error) {
                console.error("Error initializing artifact:", error);
                const container = document.getElementById('artifact-container');
                container.innerHTML = '<p class="loading">Error loading artifact. Please refresh the page.</p>';
            }
        }

        // Load artifact when page loads
        window.addEventListener('DOMContentLoaded', () => {
            console.log("Page loaded, initializing artifact...");
            initArtifactOfDay();
        });

        // ============== HOME PAGE ARTIFACT LOOKUP ==============
        // Simplified version - shows only contacts and special instructions
        
        // Manual location lookup from home page
        window.homeLookupLocation = async function() {
            const lat = parseFloat(document.getElementById('homeLatitude').value);
            const lng = parseFloat(document.getElementById('homeLongitude').value);
            
            if (isNaN(lat) || isNaN(lng)) {
                alert('Please enter valid latitude and longitude values.');
                return;
            }
            
            if (lat < -90 || lat > 90 || lng < -180 || lng > 180) {
                alert('Please enter valid coordinate ranges (Lat: -90 to 90, Lng: -180 to 180).');
                return;
            }
            
            await homeLookupLocationByCoords(lat, lng);
        };

        // Get current location from home page
        window.homeGetCurrentLocation = function() {
            if (!navigator.geolocation) {
                alert('Geolocation is not supported by this browser.');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    
                    // Fill in the form
                    document.getElementById('homeLatitude').value = lat;
                    document.getElementById('homeLongitude').value = lng;
                    
                    homeLookupLocationByCoords(lat, lng);
                },
                function(error) {
                    console.error('Error getting location:', error);
                    alert('Unable to get your location. Please try entering coordinates manually.');
                }
            );
        };

        // Lookup location by coordinates from home page
        async function homeLookupLocationByCoords(lat, lng) {
            console.log(`üè† Home page lookup: ${lat}, ${lng}`);
            
            try {
                // Call property API
                const parcelData = await homeCheckData(lat, lng);
                
                if (parcelData) {
                    parcelData.lat = lat;
                    parcelData.long = lng;
                    
                    // Check for specific instructions in database
                    const specificInstructions = await homeCheckForSpecificInstructions(parcelData);
                    
                    // Display simplified guidance
                    homeDisplayGuidance(parcelData, specificInstructions);
                } else {
                    homeDisplayDefaultGuidance('No property data found for these coordinates.');
                }
            } catch (error) {
                console.error('Error during lookup:', error);
                homeDisplayDefaultGuidance(`Error: ${error.message}`);
            }
        }

        // Fetch parcel data from API
        async function homeCheckData(lat, lng) {
            try {
                const apiUrl = `https://getpropertyinfo-gailic6cjq-uc.a.run.app/getPropertyInfo?lat=${lat}&long=${lng}`;
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error(`API returned status ${response.status}`);
                }
                
                const data = await response.json();
                
                // Normalize state field
                if (data && data.state_abbr && !data.state) {
                    data.state = data.state_abbr;
                }
                
                if (data && (data.owner || data.jurisdiction)) {
                    return data;
                }
                
                return null;
                
            } catch (error) {
                console.error('Error fetching property data:', error);
                return null;
            }
        }

        // Check for specific instructions in database - FOUR TIER FALLBACK
        async function homeCheckForSpecificInstructions(propertyData) {
            try {
                const owner = (propertyData.owner || '').toLowerCase().trim();
                const jurisdiction = (propertyData.jurisdiction || '').toLowerCase().trim();
                const state = (propertyData.state || '').toUpperCase().trim();
                
                // Get all instructions from database
                const querySnapshot = await getDocs(collection(db, "artifactInstructions"));
                
                if (querySnapshot.empty) {
                    return null;
                }
                
                let ownerMatch = null;
                let jurisdictionMatch = null;
                let stateMatch = null;
                
                // TIER 1, 2 & 2.5: Loop through all instructions
                for (const docSnapshot of querySnapshot.docs) {
                    const instruction = docSnapshot.data();
                    const dbOwner = (instruction.owner || '').toLowerCase().trim();
                    const dbJurisdiction = (instruction.jurisdiction || '').toLowerCase().trim();
                    const dbState = (instruction.state || '').toUpperCase().trim();
                    const keywords = (instruction.keywords || []).map(k => k.toLowerCase().trim());
                    
                    // STATE MATCHING: If instruction has states, property state must match
                    if (dbState) {
                        const dbStates = dbState.split(',').map(s => s.trim()).filter(s => s);
                        const stateMatches = dbStates.some(s => s === state);
                        
                        if (!state || !stateMatches) {
                            continue;
                        }
                    }
                    
                    // TIER 1: Owner match
                    if (owner && !ownerMatch) {
                        if (dbOwner && (owner.includes(dbOwner) || dbOwner.includes(owner))) {
                            ownerMatch = { ...instruction, matchType: 'owner', docId: docSnapshot.id };
                            break;
                        }
                        
                        for (const keyword of keywords) {
                            if (owner.includes(keyword)) {
                                ownerMatch = { ...instruction, matchType: 'keyword-owner', docId: docSnapshot.id };
                                break;
                            }
                        }
                        
                        if (ownerMatch) break;
                    }
                    
                    // TIER 2: Jurisdiction match
                    if (jurisdiction && !ownerMatch && !jurisdictionMatch) {
                        if (!dbOwner || dbOwner === '') {
                            if (dbJurisdiction && (jurisdiction.includes(dbJurisdiction) || dbJurisdiction.includes(jurisdiction))) {
                                jurisdictionMatch = { ...instruction, matchType: 'jurisdiction', docId: docSnapshot.id };
                            }
                            
                            if (!jurisdictionMatch) {
                                for (const keyword of keywords) {
                                    if (jurisdiction.includes(keyword) || keyword.includes(jurisdiction)) {
                                        jurisdictionMatch = { ...instruction, matchType: 'keyword-jurisdiction', docId: docSnapshot.id };
                                        break;
                                    }
                                }
                            }
                        }
                    }
                    
                    // TIER 2.5: State-only match
                    if (state && !ownerMatch && !jurisdictionMatch && !stateMatch) {
                        if ((!dbOwner || dbOwner === '') && (!dbJurisdiction || dbJurisdiction === '')) {
                            if (dbState && state === dbState) {
                                stateMatch = { ...instruction, matchType: 'state', docId: docSnapshot.id };
                            }
                        }
                    }
                }
                
                // Return best match
                if (ownerMatch) {
                    return ownerMatch;
                } else if (jurisdictionMatch) {
                    return jurisdictionMatch;
                } else if (stateMatch) {
                    return stateMatch;
                } else {
                    return null;
                }
                
            } catch (error) {
                console.error('Error checking database:', error);
                return null;
            }
        }

        // Display guidance on home page (simplified - contacts and instructions only)
        function homeDisplayGuidance(propertyData, specificInstructions) {
            const resultsDiv = document.getElementById('homeGuidanceResults');
            const contentDiv = document.getElementById('homeGuidanceContent');
            const defaultSteps = document.getElementById('homeDefaultSteps');
            
            // Hide default steps
            defaultSteps.style.display = 'none';
            
            if (specificInstructions && specificInstructions.htmlContent) {
                // Show custom instructions
                contentDiv.innerHTML = specificInstructions.htmlContent;
            } else {
                // Show default guidance
                contentDiv.innerHTML = homeGetDefaultGuidanceHTML();
            }
            
            resultsDiv.style.display = 'block';
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Display default guidance on home page
        function homeDisplayDefaultGuidance(errorInfo = null) {
            const resultsDiv = document.getElementById('homeGuidanceResults');
            const contentDiv = document.getElementById('homeGuidanceContent');
            const defaultSteps = document.getElementById('homeDefaultSteps');
            
            defaultSteps.style.display = 'none';
            
            let html = '';
            if (errorInfo) {
                html += `<p style="color: #e74c3c; font-weight: 600; margin-bottom: 1rem;">${errorInfo}</p>`;
            }
            
            html += homeGetDefaultGuidanceHTML();
            contentDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Get default guidance HTML
        function homeGetDefaultGuidanceHTML() {
            return `
                <div class="emergency-note">
                    <strong>‚ö†Ô∏è STOP! Do not disturb the artifact or the surrounding area.</strong>
                </div>
                
                <div class="contact-card">
                    <h4>üìû Contact Your Local Authorities</h4>
                    <div class="contact-info">
                        <p><strong>County Archaeologist or Planning Department</strong></p>
                        <p>Search online for: "[Your County Name] archaeologist" or "[Your County Name] planning department"</p>
                        <p style="margin-top: 1rem;"><strong>State Historic Preservation Office (SHPO)</strong></p>
                        <p>Every state has a SHPO - search: "[Your State] historic preservation office"</p>
                    </div>
                </div>
                
                <div class="contact-card">
                    <h4>üèõÔ∏è Federal Resources</h4>
                    <div class="contact-info">
                        <p><strong>If on Federal Land:</strong></p>
                        <p>National Park Service, Bureau of Land Management, U.S. Forest Service, etc.</p>
                        <p style="margin-top: 1rem;"><strong>If Native American artifacts:</strong></p>
                        <p>Contact local tribal authorities and NAGPRA coordinator</p>
                    </div>
                </div>
                
                <div class="emergency-note">
                    <strong>‚öñÔ∏è Legal Notice:</strong> Federal and state laws protect archaeological resources. The Archaeological Resources Protection Act (ARPA) and similar state laws make it illegal to excavate, remove, damage, or otherwise alter archaeological sites on public or tribal lands without a permit. Violations can result in criminal penalties including fines and imprisonment.
                </div>
                
                <div class="contact-card" style="background: #e3f2fd; border-color: #90caf9;">
                    <h4>üìö Learn More</h4>
                    <div class="contact-info">
                        <p>Visit the <a href="laws.html" style="color: #1976d2; font-weight: 600;">Federal Archaeology Laws</a> page to learn about your legal responsibilities.</p>
                    </div>
                </div>
            `;
        }

        // ============== END HOME PAGE ARTIFACT LOOKUP ==============

        // Navigation functionality is now handled by shared_nav.js

        // ============== LOCATION SEARCH FUNCTIONALITY ==============
        const locationInput = document.getElementById('locationInput');
        const getGuidanceBtn = document.getElementById('getGuidanceBtn');
        const useCurrentLocationIcon = document.getElementById('useCurrentLocationIcon');

        // Handle location icon click to get current location
        if (useCurrentLocationIcon) {
            useCurrentLocationIcon.addEventListener('click', function() {
                if ("geolocation" in navigator) {
                    // Show loading state
                    const originalIcon = this.textContent;
                    this.textContent = '‚è≥';
                    this.style.cursor = 'wait';
                    
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const lat = position.coords.latitude.toFixed(6);
                            const lon = position.coords.longitude.toFixed(6);
                            
                            // Redirect to artifactHelp.html with coordinates
                            window.location.href = `artifactHelp.html?lat=${lat}&lng=${lon}`;
                        },
                        (error) => {
                            // Reset icon state
                            this.textContent = originalIcon;
                            this.style.cursor = 'pointer';
                            
                            let errorMessage = 'Unable to get your location.';
                            if (error.code === error.PERMISSION_DENIED) {
                                errorMessage = 'Location access denied. Please enable location permissions and try again.';
                            } else if (error.code === error.POSITION_UNAVAILABLE) {
                                errorMessage = 'Location information unavailable. Please enter coordinates manually.';
                            } else if (error.code === error.TIMEOUT) {
                                errorMessage = 'Location request timed out. Please try again.';
                            }
                            alert(errorMessage);
                            console.error('Geolocation error:', error);
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 0
                        }
                    );
                } else {
                    alert('Geolocation is not supported by your browser. Please enter coordinates manually.');
                }
            });
        }

        // Handle guidance button click
        if (getGuidanceBtn) {
            getGuidanceBtn.addEventListener('click', function() {
                let coordinates = locationInput.value.trim();
                
                if (coordinates === '' || coordinates === 'Getting your location...') {
                    alert('Please enter coordinates or use your current location.');
                    return;
                }
                
                // Parse coordinates
                const coordPattern = /^(-?\d+\.?\d*)[,\s]+(-?\d+\.?\d*)$/;
                const match = coordinates.match(coordPattern);
                
                if (match) {
                    const lat = parseFloat(match[1]);
                    const lon = parseFloat(match[2]);
                    
                    // Validate coordinates
                    if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {
                        // Redirect to artifactHelp.html with coordinates
                        window.location.href = `artifactHelp.html?lat=${lat}&lng=${lon}`;
                    } else {
                        alert('Invalid coordinates. Latitude must be between -90 and 90, longitude between -180 and 180.');
                    }
                } else {
                    alert('Please enter coordinates in the format: latitude, longitude (e.g., 47.6062, -122.3321)');
                }
            });

            // Allow Enter key to trigger search
            locationInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    getGuidanceBtn.click();
                }
            });
        }
        // ============== END LOCATION SEARCH FUNCTIONALITY ==============

        // ============== TIMELINE PROGRESS BAR ANIMATION ==============
        // Animate progress bar on scroll or page load
        function animateTimeline() {
            const progressFill = document.querySelector('.timeline-progress-fill');
            const timelineSection = document.querySelector('.process-timeline-section');
            
            if (!progressFill || !timelineSection) return;
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // On desktop: animate width, on mobile: animate height
                        const isMobile = window.innerWidth <= 768;
                        if (isMobile) {
                            progressFill.style.height = '100%';
                        } else {
                            progressFill.style.width = '100%';
                        }
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });
            
            observer.observe(timelineSection);
        }
        
        // Run animation when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', animateTimeline);
        } else {
            animateTimeline();
        }
        // ============== END TIMELINE ANIMATION ==============
    </script>
</body>
</html>